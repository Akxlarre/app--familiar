/* ============================================
   DataTableCard Component Styles
   Reutilizable para cualquier entidad
   ============================================ */

.table-container {
  flex: 1;
  min-height: 0;
  overflow-x: auto;
  overflow-y: auto;
  min-width: 0;
  width: 100%;
  background: var(--bg-surface);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  /* Transición suave para cambios de contenido (paginador, etc.) */
  transition: box-shadow 0.25s ease, border-color 0.25s ease;

  ::ng-deep .p-datatable {
    min-width: fit-content;
  }

  ::ng-deep .rut-cell {
    white-space: nowrap;
    word-break: keep-all;
  }

  ::ng-deep .p-datatable-sm .p-datatable-thead > tr > th {
    padding: var(--space-3) var(--space-4) !important;
  }

  ::ng-deep .p-datatable-sm .p-datatable-tbody > tr > td {
    padding: var(--space-3) var(--space-4) !important;
  }
}

.action-bar {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: var(--space-3);
  margin-bottom: var(--space-4);
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-md);
  transition:
    opacity 0.25s ease,
    transform 0.25s ease,
    height 0.25s ease,
    padding 0.25s ease,
    margin 0.25s ease;
  opacity: 1;
  transform: translateY(0);
}

.action-bar--hidden {
  opacity: 0;
  pointer-events: none;
  height: 0;
  padding: 0;
  margin: 0;
  overflow: hidden;
  transform: translateY(-8px);
}

.action-bar__text {
  font-size: var(--text-sm);
  font-weight: var(--font-semibold);
  color: var(--text-primary);
}

.action-bar__actions {
  display: flex;
  gap: var(--space-2);
}

/* Badges - clases base para cellType='badge' */
:host-context(.estado-badge),
::ng-deep .estado-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px var(--space-2);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  white-space: nowrap;
}

::ng-deep .estado-success {
  color: var(--state-success);
  background: var(--state-success-bg);
  border: 1px solid var(--state-success-border);
}

::ng-deep .estado-primary {
  color: var(--color-primary);
  background: var(--color-primary-muted);
  border: 1px solid var(--accent-border);
}

::ng-deep .estado-warning {
  color: var(--state-warning);
  background: var(--state-warning-bg);
  border: 1px solid var(--state-warning-border);
}

::ng-deep .estado-error {
  color: var(--state-error);
  background: var(--state-error-bg);
  border: 1px solid var(--state-error-border);
}

/* Chips por concepto (cuadratura SII, detalle ingresos) */
::ng-deep .cell-chip,
::ng-deep .cell-badge-icon {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: 2px var(--space-2);
  border-radius: var(--radius-md);
  font-size: var(--text-xs);
  font-weight: var(--font-medium);
  white-space: nowrap;
}

::ng-deep .chip-concepto-clase-b {
  color: var(--state-info);
  background: var(--state-info-bg);
  border: 1px solid var(--state-info-border);
}

::ng-deep .chip-concepto-profesional {
  color: var(--color-primary);
  background: var(--color-primary-muted);
  border: 1px solid var(--accent-border);
}

::ng-deep .chip-concepto-psicotecnico {
  color: var(--state-warning);
  background: var(--state-warning-bg);
  border: 1px solid var(--state-warning-border);
}

::ng-deep .chip-concepto-otro {
  color: var(--text-muted);
  background: var(--bg-subtle);
  border: 1px solid var(--border-default);
}

/* Progress bar en celda */
::ng-deep .cell-progress {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  min-width: 120px;
}

::ng-deep .cell-progress__value {
  flex-shrink: 0;
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-primary);
  min-width: 3.5rem;
}

::ng-deep .cell-progress__bar {
  flex: 1;
  height: 6px;
  border-radius: var(--radius-full);
  background: var(--bg-subtle);
  overflow: hidden;
}

::ng-deep .cell-progress__fill {
  height: 100%;
  border-radius: var(--radius-full);
  background: var(--color-primary);
  transition: width 0.3s ease;
}

/* Fila de totales */
::ng-deep .p-datatable-row-total td {
  font-weight: var(--font-semibold) !important;
  background: var(--bg-elevated) !important;
  border-top: 2px solid var(--border-strong) !important;
}

/* Records label */
.records-label {
  margin-bottom: var(--space-2);
}

.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-12);
  text-align: center;
  color: var(--text-muted);
}

.empty-state__icon {
  font-size: var(--text-4xl);
  margin-bottom: var(--space-4);
  opacity: 0.5;
}

.empty-state__message {
  font-size: var(--text-base);
  font-weight: var(--font-medium);
  margin-bottom: var(--space-2);
  color: var(--text-secondary);
}

.empty-state__subtitle {
  font-size: var(--text-sm);
  color: var(--text-muted);
  margin-bottom: var(--space-4);
}

/* ============================================
   Stack layout (mobile) - cards con etiquetas
   En desktop: ocultar títulos de columna (ya están en thead).
   En mobile: PrimeNG los muestra con @media (max-width: breakpoint).
   ============================================ */

.table-container ::ng-deep .p-datatable-tbody > tr > td .p-datatable-column-title {
  /* Desktop: ocultar para no duplicar encabezados en cada celda */
  display: none;
  font-weight: var(--font-semibold);
  color: var(--text-muted);
  margin-right: var(--space-2);
}

/* Mobile: mostrar títulos (PrimeNG breakpoint 768px) */
@media screen and (max-width: 768px) {
  .table-container ::ng-deep .p-datatable-tbody > tr > td .p-datatable-column-title {
    display: block;
  }
}
